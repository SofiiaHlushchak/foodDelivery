<div
  class="m-auto flex w-full flex-col justify-center sm:w-3/4 md:w-2/3 lg:w-3/5 xl:w-3/5 2xl:w-1/2">
  <app-decorative-shapes />
  <app-user-info
    *ngIf="user$ | async as user"
    [user]="user"
    [displayEmail]="false"
    class="flex flex-col items-center" />
  <form
    [formGroup]="userProfileForm"
    (ngSubmit)="updateProfile()"
    class="z-10 mt-11 space-y-8">
    <div>
      <label for="name" class="block text-sm font-medium text-gray-manatee">
        Full name
      </label>
      <input
        id="name"
        formControlName="name"
        class="mt-1 w-full rounded-lg border-2 p-3 outline-none"
        [ngClass]="{
          'border-gray-light focus:border-primary':
            !userProfileForm.controls['name'].invalid ||
            !userProfileForm.controls['name'].touched,
          'border-red-500':
            userProfileForm.controls['name'].invalid &&
            userProfileForm.controls['name'].touched,
        }" />
      <div
        *ngIf="
          userProfileForm.controls['name'].invalid &&
          userProfileForm.controls['name'].touched
        ">
        <small class="absolute mt-1 text-red-500">
          {{
            userProfileForm.controls['name'].errors
              | controlErrorHandler: 'Name'
          }}</small
        >
      </div>
    </div>
    <div>
      <label for="email" class="block text-sm font-medium text-gray-manatee">
        E-mail:
      </label>
      <input
        id="email"
        formControlName="email"
        type="email"
        class="mt-1 w-full rounded-lg border-2 p-3 outline-none"
        [ngClass]="{
          'border-gray-light focus:border-primary':
            !userProfileForm.controls['email'].invalid ||
            !userProfileForm.controls['email'].touched,
          'border-red-500':
            userProfileForm.controls['email'].invalid &&
            userProfileForm.controls['email'].touched,
        }" />
      <div
        *ngIf="
          userProfileForm.controls['email'].invalid &&
          userProfileForm.controls['email'].touched
        ">
        <small class="absolute mt-1 text-red-500">
          {{
            userProfileForm.controls['email'].errors
              | controlErrorHandler: 'E-mail'
          }}</small
        >
      </div>
    </div>

    <div>
      <label
        for="phoneNumber"
        class="block text-sm font-medium text-gray-manatee">
        Phone Number
      </label>
      <input
        id="phoneNumber"
        formControlName="phoneNumber"
        class="mt-1 w-full rounded-lg border border-gray-light p-3 outline-none focus:border-none focus:ring focus:ring-primary" />
    </div>

    <div formGroupName="deliveryAddress" class="mt-6 space-y-6">
      <div>
        <label for="region" class="block text-sm font-medium text-gray-manatee">
          Region
        </label>
        <input
          id="region"
          formControlName="region"
          (blur)="onRegionBlur()"
          class="mt-1 w-full rounded-lg border border-gray-light p-3 outline-none focus:border-none focus:ring focus:ring-primary" />
      </div>
      <div>
        <label for="city" class="block text-sm font-medium text-gray-manatee">
          City
        </label>
        <input
          id="city"
          formControlName="city"
          (blur)="onCityBlur()"
          class="mt-1 w-full rounded-lg border border-gray-light p-3 outline-none focus:border-none focus:ring focus:ring-primary" />
      </div>

      <div>
        <label for="street" class="block text-sm font-medium text-gray-manatee">
          Street
        </label>
        <input
          id="street"
          formControlName="street"
          class="mt-1 w-full rounded-lg border border-gray-light p-3 outline-none focus:border-none focus:ring focus:ring-primary" />
      </div>
    </div>

    <div>
      <label
        for="novaPostDepartment"
        class="block text-sm font-medium text-gray-manatee">
        Nova Poshta Department
      </label>
      <select
        id="novaPostDepartment"
        formControlName="novaPostDepartment"
        class="mt-1 w-full rounded-lg border border-gray-light p-3 outline-none focus:border-none focus:ring focus:ring-primary">
        <option
          *ngFor="let department of novaPostDepartments"
          [value]="department">
          {{ department }}
        </option>
      </select>
    </div>
    <div>
      <label for="age" class="block text-sm font-medium text-gray-manatee">
        Age
      </label>
      <input
        id="age"
        formControlName="age"
        type="number"
        class="mt-1 w-full rounded-lg border-2 p-3 outline-none"
        [ngClass]="{
          'border-gray-light focus:border-primary':
            !userProfileForm.controls['age'].invalid ||
            !userProfileForm.controls['age'].touched,
          'border-red-500':
            userProfileForm.controls['age'].invalid &&
            userProfileForm.controls['age'].touched,
        }" />
      <div
        *ngIf="
          userProfileForm.controls['age'].invalid &&
          userProfileForm.controls['age'].touched
        ">
        <small class="absolute mt-1 text-red-500">
          {{
            userProfileForm.controls['age'].errors | controlErrorHandler: 'Age'
          }}</small
        >
      </div>
    </div>

    <button
      type="submit"
      [disabled]="userProfileForm.invalid"
      class="m-auto flex min-w-64 items-center justify-center rounded-full bg-primary px-16 py-6 text-base tracking-widest text-white shadow-main-button">
      Update
    </button>
  </form>
</div>
